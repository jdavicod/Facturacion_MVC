@model Facturacion_MVC.Models.Tblproducto

@{
    ViewData["Title"] = "Nuevo";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2 class="well">Nuevo Producto</h2>

@using (Html.BeginForm("Nuevo", "TBLProductos", FormMethod.Post))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true, "", new { @class = "text-danger mb-2" })

    <div class="mb-3">
        @Html.LabelFor(d => d.StrNombre)
        @Html.TextBoxFor(d => d.StrNombre, new { @class = "form-control", required = "required" })
        @Html.ValidationMessageFor(d => d.StrNombre, "", new { @class = "text-danger" })
    </div>

    <div class="mb-3">
        @Html.LabelFor(d => d.StrCodigo)
        @Html.TextBoxFor(d => d.StrCodigo, new { @class = "form-control", required = "required" })
        @Html.ValidationMessageFor(d => d.StrCodigo, "", new { @class = "text-danger" })
    </div>


    <div class="mb-3">
        @Html.LabelFor(d => d.IdCategoria, "Categoría (ID)")
        @Html.TextBoxFor(d => d.IdCategoria, new { @class = "form-control", type = "number", required = "required", min = "1" })
        @Html.ValidationMessageFor(d => d.IdCategoria, "", new { @class = "text-danger" })
    </div>

    <div class="mb-3">
        @Html.LabelFor(d => d.NumPrecioVenta)
        @Html.TextBoxFor(d => d.NumPrecioVenta, new { @class = "form-control", type = "number", step = "0.01", required = "required" })
        @Html.ValidationMessageFor(d => d.NumPrecioVenta, "", new { @class = "text-danger" })
    </div>

    <div class="mb-3">
        @Html.LabelFor(d => d.NumStock)
        @Html.TextBoxFor(d => d.NumStock, new { @class = "form-control", type = "number", min = "0" })
        @Html.ValidationMessageFor(d => d.NumStock, "", new { @class = "text-danger" })
    </div>

    <!-- Mostrar errores del servidor si existen (útil para depuración) -->
    @if (ViewBag.ModelErrors != null)
    {
        <div class="alert alert-danger">
            <ul>
                @foreach (var me in (IEnumerable<dynamic>)ViewBag.ModelErrors)
                {
                    <li><strong>@me.Key:</strong>
                        <ul>
                            @foreach (var err in me.Errors)
                            {
                                <li>@err</li>
                            }
                        </ul>
                    </li>
                }
            </ul>
        </div>
    }

    <button type="submit" class="btn btn-success">Guardar</button>
    <a class="btn btn-primary" href="@Url.Action("Index", "TBLProductos")">Retornar</a>
}
